
<!-- 
===========================================================
TRAINING DASHBOARD - FULLY ANNOTATED VERSION
===========================================================
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0d1117">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta charset="UTF-8" />

    <title>Training Dashboard</title>

    <!-- Modular CSS -->
    <link rel="stylesheet" href="static/css/base.css">
    <link rel="stylesheet" href="static/css/layout.css">
    <link rel="stylesheet" href="static/css/cards.css">
    <link rel="stylesheet" href="static/css/calendar.css">
    <link rel="stylesheet" href="static/css/zones.css">
    <link rel="stylesheet" href="static/css/zwo.css">
    <link rel="stylesheet" href="static/css/mobile.css">

    <script>
    function saveHoursAndRebuild() {
        const value = document.getElementById("hours_input").value;
        document.getElementById("save_status").innerText = "Saving…";
        window.location.href = `mytrainingapp://save_and_rebuild?value=${value}`;
        setTimeout(() => { location.reload(); }, 2000);
    }
    </script>

    <script>
    function openTab(evt, tabId) {
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.classList.remove('active');
        });
        const target = document.getElementById(tabId);
        if (target) target.classList.add('active');
        document.querySelectorAll('.tab-button').forEach(btn => {
            btn.classList.remove('active');
        });
        evt.currentTarget.classList.add('active');
    }
    </script>

    <script>
    function toggleCard(id) {
        const content = document.getElementById(id);
        content.style.display = (content.style.display === "none") ? "block" : "none";
    }
    </script>

    <script>
    async function loadTooltipPreview(workoutId) {
      const container = document.getElementById("tooltip-" + workoutId);
      if (!container) return;

      const jsonFile = container.dataset.json;

      try {
        const res = await fetch("/generated_workouts/" + jsonFile);
        if (!res.ok) {
          container.textContent = "No workout preview available.";
          return;
        }

        const data = await res.json();
        const totalMin = Math.round(data.total_duration_sec / 60);
        const tss = data.estimated_tss;
        const iff = data.estimated_if;

        let html = `
          <div class="workout-summary-line">
            <span>${totalMin} min</span>
            <span>IF ${iff.toFixed(2)}</span>
            <span>TSS ${tss.toFixed(0)}</span>
          </div>
          <hr style="border:0;border-top:1px solid #444;margin:6px 0;">
          <div class="workout-blocks">
        `;

        data.blocks.forEach(b => {
            const durMin = Math.round(b.duration_sec / 60);
            let powerText = "";

            if (b.power !== undefined) {
                powerText = `${Math.round(b.power * 100)}%`;
            } else if (b.power_low !== undefined && b.power_high !== undefined) {
                powerText = `${Math.round(b.power_low * 100)}–${Math.round(b.power_high * 100)}%`;
            }

            html += `
                <div class="workout-block">
                    <div class="block-label">${b.type}</div>
                    <div class="block-meta">${durMin} min · ${powerText}</div>
                </div>
            `;
        });

        html += `</div>`;
        container.innerHTML = html;

        const inline = document.getElementById("inline-" + workoutId);
        if (inline) {
          inline.innerHTML = "";
          const total = data.total_duration_sec;

          data.blocks.forEach(b => {
            const div = document.createElement("div");
            div.className = "inline-block";
            div.style.flexGrow = b.duration_sec;
            inline.appendChild(div);
          });
        }

      } catch (e) {
        container.textContent = "Error loading preview.";
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll(".tooltip-content").forEach(el => {
        const id = el.id.replace("tooltip-", "");
        loadTooltipPreview(id);
      });
    });
    </script>

</head>

<body>

    <div class="tabs">
        <button class="tab-button active" onclick="openTab(event, 'main-tab')">Dashboard</button>
        <button class="tab-button" onclick="openTab(event, 'charts-tab')">Charts</button>
    </div>

    <div id="main-tab" class="tab-content active">
        <div class="container">

        <script>
        function saveHoursAndRebuild() {
            const value = document.getElementById("hours_input").value;
            document.getElementById("save_status").innerText = "Saving…";
            window.location.href = `mytrainingapp://save_and_rebuild?value=${value}`;
            setTimeout(() => { location.reload(); }, 2000);
        }
        </script>

        
<div class="header-card">
  <div class="header-info" style="display:flex; justify-content:space-between; align-items:flex-start; flex-wrap:wrap; gap:24px;">

    <!-- LEFT SIDE: Avatar + Athlete Info -->
    <div style="flex:1; min-width:300px;">
      <div style="display:flex; align-items:center; gap:16px; margin-bottom:8px;">
        <div class="header-avatar">
          <img src="https://dgalywyr863hv.cloudfront.net/pictures/athletes/232271/13378637/4/large.jpg" alt="Athlete photo" />
        </div>
        <div style="font-size:1.8em; font-weight:600;">Training Dashboard</div>
      </div>

      <div class="header-meta" style="margin-bottom:8px;">
        Steve "Chip” Chmiewliski · Taunton
      </div>

      <div class="header-metrics" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(120px, 1fr)); gap:12px;">
        <div><div class="header-metric-label">Last Training Day</div><div class="header-metric-value">2026-02-07</div></div>
        <div><div class="header-metric-label">History Days</div><div class="header-metric-value">91</div></div>
        <div><div class="header-metric-label">CTL</div><div class="header-metric-value">77.8</div></div>
        <div><div class="header-metric-label">ATL</div><div class="header-metric-value">126.0</div></div>
        <div><div class="header-metric-label">TSB</div><div class="header-metric-value">-48.2</div></div>
        <div><div class="header-metric-label">Weekly TSS</div><div class="header-metric-value">259.0</div></div>
        <div><div class="header-metric-label">FTP</div><div class="header-metric-value">260 W</div></div>
        <div><div class="header-metric-label">Latest Sync</div><div class="header-metric-value">2026-02-07</div></div>
        <div><div class="header-metric-label">Training hours</div><div class="header-metric-value">10.0</div></div>
      </div>
    </div>

    <!-- RIGHT SIDE: Controls -->
    <div style="display:flex; flex-direction:column; align-items:flex-end; gap:6px;">
      <div style="display:flex; align-items:center; gap:8px;">
        <input id="hours_input" type="number" step="0.5" class="hours-input" placeholder="Enter hours"/>
        <button onclick="saveHoursAndRebuild()" class="save-button">
            Save & Rebuild
        </button>
        <span id="save_status"></span>
      </div>
      <p id="save_status" class="small" style="text-align:right; margin:0;"></p>
    </div>

  </div>

  <script>
  function saveHours() {
    const hours = document.getElementById("available_hours_input").value;
    const status = document.getElementById("save_status");
    status.innerText = "Saving…";
    window.location.href = "mytrainingapp://save_hours?value=" + hours;

    setTimeout(() => {
      status.innerText = "Saved ";
      setTimeout(() => {
        status.innerText = "";
      }, 2000);
    }, 1000);
  }
  </script>
</div>

        
    <div class="card training-load">
        <h2>Training Load Status</h2>
        <h3>Training Readiness</h3><p><strong>Score:</strong> 25/100 <span style='background:#e74c3c;padding:4px 8px;border-radius:6px;font-size:0.85em;'>Low</span></p><p><strong>Time to Fresh:</strong> 9 days</p><p><strong>Time to Peak:</strong> 11 days</p><h3>Load Status</h3><p><strong>Status:</strong> <span class='status-fatigued'>FATIGUED</span></p><p><strong>TSB Trend (7 days, no load):</strong> -32.0 → 27.5</p><p>1 days since last activity</p><p>You’re carrying high training load. Consider recovery before key efforts.</p>
    </div>
    
        
    <div class="card fatigue-card">
        <h2>Fatigue (Hybrid)</h2>
        <p><strong>TSB:</strong> -32.0 <span class="badge badge-Fatigued">bad</span></p><p><strong>CTL:</strong> 76.0</p><p><strong>ATL:</strong> 108.0</p><h3>7‑Day Fatigue Forecast</h3><ul><li>Day 1: TSB -32.0</li><li>Day 2: TSB -18.4</li><li>Day 3: TSB -7.0</li><li>Day 4: TSB 2.7</li><li>Day 5: TSB 10.7</li><li>Day 6: TSB 17.4</li><li>Day 7: TSB 22.9</li></ul><h3>Next 3 Days: Suggested Sessions</h3><ul><li>Endurance</li><li>Tempo</li><li>Sweet spot</li></ul>
    </div>
    
        
    <div class="card race-readiness-card">
        <h2>Race Readiness & Load Projection</h2>
        <h3>Current Load & Fatigue</h3><p><strong>CTL:</strong> 76.0 <span style='background:#e74c3c;padding:4px 8px;border-radius:6px;font-size:0.85em;'>Below Target</span></p><p><strong>CTL Trend (7 days):</strong> <span style='color:#2ecc71;font-size:1.2em;'>▲</span></p><p><strong>ATL:</strong> 108.0</p><p><strong>TSB:</strong> -32.0 <span style='background:#e74c3c;padding:4px 8px;border-radius:6px;font-size:0.85em;'>Fatigued</span></p><h3>CTL Position vs Scenarios</h3>
        <div style='width:100%;background:#333;border-radius:6px;height:12px;margin:6px 0;'>
            <div style='width:0%;height:12px;border-radius:6px;
                        background:linear-gradient(90deg,#e74c3c,#f1c40f,#2ecc71);'>
            </div>
        </div>
        <div style='display:flex;justify-content:space-between;font-size:0.8em;opacity:0.8;'>
            <span>Maintain (82.8)</span>
            <span>Build (89.8)</span>
            <span>Aggressive (95.8)</span>
        </div>
        <h3>Race Readiness</h3><p><strong>Score:</strong> 54/100 <span style='background:#f1c40f;padding:4px 8px;border-radius:6px;font-size:0.85em;'>Building</span></p><h3>Performance Window</h3><p><strong>Status:</strong> <span class='badge pw-not-ready'>Not Yet</span></p><p>You need more recovery before peak performance.</p><h3>Load Ramp Safety</h3><p><strong>Ramp Rate:</strong> <span class='badge ramp-medium'>7.8 CTL/week</span></p><p>Ramp rate is elevated — monitor fatigue closely.</p><h3>CTL Projection to Race Day (23/04/2026)</h3><table class='ctl-projection'><tr><th>Scenario</th><th>Race Day CTL</th></tr><tr><td>Maintain</td><td>82.8</td></tr><tr><td>Build</td><td>89.8</td></tr><tr><td>Aggressive</td><td>95.8</td></tr></table>
    </div>
    
        
        
    <div class="card">
        <h2>Time Availability</h2>

        <p><strong>Actual:</strong> 0h 0m</p>
        <p><strong>Scheduled:</strong> 0h 0m</p>
        <p><strong>Available:</strong> 10h 0m</p>

        <p><strong>Remaining (vs Scheduled):</strong> 10h 0m</p>
        <p><strong>Remaining (vs Actual):</strong> 0h 0m</p>
        <p><strong>Compliance:</strong> 0.0%</p>

        <h3 style="margin-top:15px;">Actual vs Scheduled ⬇️</h3>
        <div style="background:#30363d; height:12px; border-radius:6px; width:100%;">
            <div style="
                height:12px;
                border-radius:6px;
                width:0%;
                background:#d9534f;
                transition: width 0.4s ease;">
            </div>
        </div>
        <p class="small">0.0% of scheduled completed</p>

        <h3 style="margin-top:15px;">Scheduled vs Available ⬆️</h3>
        <div style="background:#30363d; height:12px; border-radius:6px; width:100%;">
            <div style="
                height:12px;
                border-radius:6px;
                width:0.0%;
                background:#5cb85c;
                transition: width 0.4s ease;">
            </div>
        </div>
        <p class="small">0.0% of available time scheduled</p>
    </div>
    
        
    <div class="card" style="grid-column: 1 / -1;">
    
    <div class="card week-calendar">
        <h2>Week Calendar</h2>
        <div class="week-calendar-grid">
    
        <div class="week-cell">
            <div class="week-day-label">Monday</div>
            <strong>Monday</strong>: Rest
        </div>
        
        <div class="week-cell">
            <div class="week-day-label">Tuesday</div>
            
                    <div class="week-session-text zone-race planned-session">
                        <strong>Planned:</strong> WTRL Race – Zwift<br><span class='small'>1h</span><br><span class='small why-session'>Key intensity session to maintain or improve race‑specific fitness. Contributes about 95 TSS. Fits within your current time budget at ~1.0h. Helps close most of your remaining TSS gap.</span><br><span class='small'>(None, None)</span>
                        <div class="badge" style="margin-top:4px;">Race</div>
                    </div>
                
                    <div class="week-session-text zone-race planned-session">
                        <strong>Planned:</strong> WTRL Race a Zwift
                    <div class='zwo-tooltip'>
                        <span class='zwo-file-name'>ZWO: 2026-02-03_tuesday_WTRL_Race_a_Zwift.zwo</span>
                        <a class='btn-download' href='/generated_workouts/2026-02-03_tuesday_WTRL_Race_a_Zwift.zwo' download='2026-02-03_tuesday_WTRL_Race_a_Zwift.zwo'>
                            <img src='/icons/zwift.png' class='zwift-icon'>Download ZWO
                        </a>
                        <div class='tooltip-content' id='tooltip-2026-02-03_tuesday_WTRL_Race_a_Zwift' data-json='2026-02-03_tuesday_WTRL_Race_a_Zwift.json'>Loading…</div>
                    </div>
                    <div class='inline-preview' id='inline-2026-02-03_tuesday_WTRL_Race_a_Zwift'></div><br><span class='small'>1h</span><br><span class='small why-session'>Key intensity session to maintain or improve race‑specific fitness. Contributes about 60 TSS. Fits within your current time budget at ~1.0h. Helps close most of your remaining TSS gap.</span><br><span class='small'>(None, None)</span>
                        <div class="badge" style="margin-top:4px;">Race</div>
                    </div>
                
        </div>
        
        <div class="week-cell">
            <div class="week-day-label">Wednesday</div>
            <strong>Wednesday</strong>: Rest
        </div>
        
        <div class="week-cell">
            <div class="week-day-label">Thursday</div>
            
                    <div class="week-session-text  actual-session">
                        <strong>Actual:</strong> Zwift - Pacer Group Ride: The Magnificent 8 in Watopia with Coco<br><span class='small'>22m</span><br><span class='small why-session'></span><br><span class='small'>186.0 W (2.89 W/kg)</span>
                        <div class="badge" style="margin-top:4px;">Endurance</div>
                    </div>
                
                    <div class="week-session-text  actual-session">
                        <strong>Actual:</strong> Zwift - Group Ride:  Hotchillee Gain Train  (B) on The 6 Train in New York<br><span class='small'>47m</span><br><span class='small why-session'></span><br><span class='small'>231.0 W (3.58 W/kg)</span>
                        <div class="badge" style="margin-top:4px;">Tempo</div>
                    </div>
                
                    <div class="week-session-text  actual-session">
                        <strong>Actual:</strong> Zwift - Watopia<br><span class='small'>26m</span><br><span class='small why-session'></span><br><span class='small'>161.5 W (2.51 W/kg)</span>
                        <div class="badge" style="margin-top:4px;">Endurance</div>
                    </div>
                
                    <div class="week-session-text zone-sweetspot planned-session">
                        <strong>Planned:</strong> Zwift GainTrain – Sweet Spot<br><span class='small'>1h</span><br><span class='small why-session'>Designed to build sustainable power while managing fatigue. Contributes about 75 TSS. Fits within your current time budget at ~1.0h. Helps close most of your remaining TSS gap.</span><br><span class='small'>(228.8, 244.39999999999998)</span>
                        <div class="badge" style="margin-top:4px;">Sweet Spot</div>
                    </div>
                
                    <div class="week-session-text zone-sweetspot planned-session">
                        <strong>Planned:</strong> Zwift GainTrain a Sweet Spot
                    <div class='zwo-tooltip'>
                        <span class='zwo-file-name'>ZWO: 2026-02-05_thursday_Zwift_GainTrain_a_Sweet_Spot.zwo</span>
                        <a class='btn-download' href='/generated_workouts/2026-02-05_thursday_Zwift_GainTrain_a_Sweet_Spot.zwo' download='2026-02-05_thursday_Zwift_GainTrain_a_Sweet_Spot.zwo'>
                            <img src='/icons/zwift.png' class='zwift-icon'>Download ZWO
                        </a>
                        <div class='tooltip-content' id='tooltip-2026-02-05_thursday_Zwift_GainTrain_a_Sweet_Spot' data-json='2026-02-05_thursday_Zwift_GainTrain_a_Sweet_Spot.json'>Loading…</div>
                    </div>
                    <div class='inline-preview' id='inline-2026-02-05_thursday_Zwift_GainTrain_a_Sweet_Spot'></div><br><span class='small'>1h</span><br><span class='small why-session'>Designed to build sustainable power while managing fatigue. Contributes about 75 TSS. Fits within your current time budget at ~1.0h. Helps close most of your remaining TSS gap.</span><br><span class='small'>(228.8, 244.39999999999998)</span>
                        <div class="badge" style="margin-top:4px;">Sweet Spot</div>
                    </div>
                
        </div>
        
        <div class="week-cell">
            <div class="week-day-label">Friday</div>
            <strong>Friday</strong>: Rest
        </div>
        
        <div class="week-cell">
            <div class="week-day-label">Saturday</div>
            
                    <div class="week-session-text  actual-session">
                        <strong>Actual:</strong> Zwift - Glyph Heights in Watopia<br><span class='small'>58m</span><br><span class='small why-session'></span><br><span class='small'>233.2 W (3.62 W/kg)</span>
                        <div class="badge" style="margin-top:4px;">Tempo</div>
                    </div>
                
                    <div class="week-session-text  actual-session">
                        <strong>Actual:</strong> Zwift - Pacer Group Ride: Loop de Loop in Watopia with Miguel<br><span class='small'>20m</span><br><span class='small why-session'></span><br><span class='small'>123.2 W (1.91 W/kg)</span>
                        <div class="badge" style="margin-top:4px;">Recovery</div>
                    </div>
                
                    <div class="week-session-text zone-endurance planned-session">
                        <strong>Planned:</strong> Endurance – scaled from Endurance Ride – 3.5h<br><span class='small'>3h 30m</span><br><span class='small why-session'>Supports aerobic base and recovery without adding excessive fatigue.</span><br><span class='small'>(143.0, 195.0)</span>
                        <div class="badge" style="margin-top:4px;">Endurance</div>
                    </div>
                
                    <div class="week-session-text zone-endurance planned-session">
                        <strong>Planned:</strong> Endurance Ride a 3.5h
                    <div class='zwo-tooltip'>
                        <span class='zwo-file-name'>ZWO: 2026-02-07_saturday_Endurance_Ride_a_3.5h.zwo</span>
                        <a class='btn-download' href='/generated_workouts/2026-02-07_saturday_Endurance_Ride_a_3.5h.zwo' download='2026-02-07_saturday_Endurance_Ride_a_3.5h.zwo'>
                            <img src='/icons/zwift.png' class='zwift-icon'>Download ZWO
                        </a>
                        <div class='tooltip-content' id='tooltip-2026-02-07_saturday_Endurance_Ride_a_3.5h' data-json='2026-02-07_saturday_Endurance_Ride_a_3.5h.json'>Loading…</div>
                    </div>
                    <div class='inline-preview' id='inline-2026-02-07_saturday_Endurance_Ride_a_3.5h'></div><br><span class='small'>3h 30m</span><br><span class='small why-session'>Supports aerobic base and recovery without adding excessive fatigue. Contributes about 60 TSS. Fits within your current time budget at ~1.0h. Helps close most of your remaining TSS gap.</span><br><span class='small'>(143.0, 195.0)</span>
                        <div class="badge" style="margin-top:4px;">Endurance</div>
                    </div>
                
        </div>
        
        <div class="week-cell">
            <div class="week-day-label">Sunday</div>
            
                    <div class="week-session-text zone-endurance planned-session">
                        <strong>Planned:</strong> Endurance – scaled from Tempo – 2h<br><span class='small'>2h</span><br><span class='small why-session'>Supports aerobic base and recovery without adding excessive fatigue.</span><br><span class='small'>(143.0, 195.0)</span>
                        <div class="badge" style="margin-top:4px;">Endurance</div>
                    </div>
                
                    <div class="week-session-text zone-tempo planned-session">
                        <strong>Planned:</strong> Tempo a 2h
                    <div class='zwo-tooltip'>
                        <span class='zwo-file-name'>ZWO: 2026-02-08_sunday_Tempo_a_2h.zwo</span>
                        <a class='btn-download' href='/generated_workouts/2026-02-08_sunday_Tempo_a_2h.zwo' download='2026-02-08_sunday_Tempo_a_2h.zwo'>
                            <img src='/icons/zwift.png' class='zwift-icon'>Download ZWO
                        </a>
                        <div class='tooltip-content' id='tooltip-2026-02-08_sunday_Tempo_a_2h' data-json='2026-02-08_sunday_Tempo_a_2h.json'>Loading…</div>
                    </div>
                    <div class='inline-preview' id='inline-2026-02-08_sunday_Tempo_a_2h'></div><br><span class='small'>2h</span><br><span class='small why-session'>Designed to build sustainable power while managing fatigue. Contributes about 75 TSS. Fits within your current time budget at ~1.0h. Helps close most of your remaining TSS gap.</span><br><span class='small'>(197.6, 234.0)</span>
                        <div class="badge" style="margin-top:4px;">Tempo</div>
                    </div>
                
        </div>
        </div></div>
    </div>
    
        <div class="collapsible-card-header" onclick="toggleCard('prev-week')">
            ▶ Previous Week
        </div>
        <div class="collapsible-card-content" id="prev-week" style="display:none;">
            <h2>Previous Week</h2><div class='week-grid'><div class='day-column'><strong>Monday</strong><br><div class='session-card zone-rest'>Rest</div></div><div class='day-column'><strong>Tuesday</strong><br><div class='session-card zone-rest'>Rest</div></div><div class='day-column'><strong>Wednesday</strong><br><div class='session-card zone-rest'>Rest</div></div><div class='day-column'><strong>Thursday</strong><br>
                <div class="session-card zone-recovery">
                    <strong>2026-02-05</strong><br>
                    Zwift - Pacer Group Ride: The Magnificent 8 in Watopia with Coco<br>
                    0h 22m<br>
                    [recovery] Contributes about 8 TSS at 186 W. Fits within your current time budget at ~0.4h.
                </div>
                
                <div class="session-card zone-vo2">
                    <strong>2026-02-05</strong><br>
                    Zwift - Group Ride:  Hotchillee Gain Train  (B) on The 6 Train in New York<br>
                    0h 47m<br>
                    [vo2] Contributes about 107 TSS at 231 W. Fits within your current time budget at ~0.8h.
                </div>
                
                <div class="session-card zone-tempo">
                    <strong>2026-02-05</strong><br>
                    Zwift - Watopia<br>
                    0h 26m<br>
                    [tempo] Contributes about 34 TSS at 161 W. Fits within your current time budget at ~0.4h.
                </div>
                </div><div class='day-column'><strong>Friday</strong><br><div class='session-card zone-rest'>Rest</div></div><div class='day-column'><strong>Saturday</strong><br>
                <div class="session-card zone-vo2">
                    <strong>2026-02-07</strong><br>
                    Zwift - Glyph Heights in Watopia<br>
                    0h 58m<br>
                    [vo2] Contributes about 103 TSS at 233 W. Fits within your current time budget at ~1.0h.
                </div>
                
                <div class="session-card zone-recovery">
                    <strong>2026-02-07</strong><br>
                    Zwift - Pacer Group Ride: Loop de Loop in Watopia with Miguel<br>
                    0h 20m<br>
                    [recovery] Contributes about 7 TSS at 123 W. Fits within your current time budget at ~0.3h.
                </div>
                </div><div class='day-column'><strong>Sunday</strong><br><div class='session-card zone-rest'>Rest</div></div></div><p><strong>Total TSS:</strong> 259<br><strong>Total Duration:</strong> 2h 53m</p><p><strong>Intensity Summary:</strong> Includes high-intensity sessions — good race prep.</p>
        </div>

        <div class="collapsible-card-header" onclick="toggleCard('next-week')">
            ▶ Next Week Plan
        </div>
        <div class="collapsible-card-content" id="next-week" style="display:none;">
            <h2>Next Week Plan</h2><div class='week-grid'><div class='day-column'><strong>Monday</strong><br><div class='session-card zone-rest'>Rest</div></div><div class='day-column'><strong>Tuesday</strong><br>
                <div class="session-card zone-race">
                    <strong>WTRL Race – Zwift</strong><br>
                    1.0h — 95 TSS<br>
                    Race
                </div>
                </div><div class='day-column'><strong>Wednesday</strong><br><div class='session-card zone-rest'>Rest</div></div><div class='day-column'><strong>Thursday</strong><br>
                <div class="session-card zone-threshold">
                    <strong>Zwift GainTrain – Threshold</strong><br>
                    1.0h — 85 TSS<br>
                    Threshold
                </div>
                </div><div class='day-column'><strong>Friday</strong><br><div class='session-card zone-rest'>Rest</div></div><div class='day-column'><strong>Saturday</strong><br>
                <div class="session-card zone-endurance">
                    <strong>Endurance Ride – 3.5h</strong><br>
                    3.5h — 155 TSS<br>
                    Endurance
                </div>
                </div><div class='day-column'><strong>Sunday</strong><br>
                <div class="session-card zone-endurance">
                    <strong>Endurance Ride – 2h</strong><br>
                    2.0h — 90 TSS<br>
                    Endurance
                </div>
                </div></div><p><strong>Planned Intensity Summary:</strong> Week skewed toward endurance work.</p>
        </div>

        
    <div class="card adaptive-changes">
        <h2>Adaptive Plan Changes</h2>
        <p>After adapting to your available time and current load:</p>
        <ul>
            <li>Kept WTRL Race – Zwift on Tuesday (fits time and TSS).</li><li>Kept Zwift GainTrain – Sweet Spot on Thursday (fits time and TSS).</li><li>Replaced Tempo – 2h on Sunday with Endurance – scaled from Tempo – 2h to fit time/TSS.</li><li>Replaced Endurance Ride – 3.5h on Saturday with Endurance – scaled from Endurance Ride – 3.5h to fit time/TSS.</li>
        </ul>
        <p class="small">
            Remaining time budget: 3.1h<br>
            Remaining TSS gap: 11 TSS
        </p>
    </div>
    
        
        
    <div class="card adaptive-load-summary">
        <h2>Adaptive Load Summary</h2>
        <p><strong>Target TSS:</strong> 390</p><p><strong>Actual TSS:</strong> 259</p><p><strong>Status:</strong> <span class='badge status-bad'>Behind</span></p><p>You're under target — consider adding volume or intensity.</p><p><strong>Planned TSS:</strong> 520<br><strong>Adjusted TSS:</strong> 390<br>High fatigue detected — reducing next week's load.</p><h3>Suggested Sessions to Close Gap (41 TSS remaining)</h3><ul><li><strong>VO2 Max</strong> — VO2 – Z5 short intervals (90 TSS)</li></ul>
    </div>
    
        
    <div class="card adaptive-load-summary">
        <h2>Recommended Sessions</h2>
        <p><strong>Target TSS: 390</strong></p>
        <p><strong>Available Hours:</strong> 10.0h</p>
        <p><strong>Scheduled:</strong> 0h</p>
        <p><strong>Remaining:</strong> 10h 0m</p>
        <ul><li><strong>Threshold</strong> — Z4 long intervals (90 TSS)</li><li><strong>Threshold</strong> — Z4 long intervals (90 TSS)</li><li><strong>Endurance</strong> — Z2 steady ride (50 TSS)</li></ul><p><strong>Remaining TSS to fill:</strong> 0</p>
    </div>
    

        </div>
    </div>

    <div id="charts-tab" class="tab-content">
        <div class="container">
            <h2>Charts</h2>
            <p>Charts will appear here.</p>
        </div>
    </div>

</body>
</html>
